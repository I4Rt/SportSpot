{"ast":null,"code":"import { useVuelidate } from '@vuelidate/core';\nimport { required, minLength } from '@vuelidate/validators';\nexport default {\n  props: ['onLogin'],\n  name: \"NewRegistration\",\n  setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  data() {\n    return {\n      user: {\n        login: '',\n        password: ''\n      },\n      accessToken: '',\n      autorized: false,\n      accessLogin: false\n    };\n  },\n  validations: {\n    user: {\n      login: {\n        required,\n        minLength: minLength(3)\n      },\n      password: {\n        required,\n        minLength: minLength(3)\n      }\n    }\n  },\n  methods: {\n    checkForm() {\n      // console.log('check')\n      this.v$.user.$touch();\n      if (!this.v$.user.$error) {\n        console.log('Валидация прошла успешно');\n        if (this.accessLogin === true) {\n          console.log('check');\n          this.autorized = true;\n          this.$emit('sendLogin', this.autorized);\n        }\n        //\n      } else console.log('Валидация не прошла');\n    },\n    created() {\n      console.log('post request');\n      fetch('http://192.168.169.32:5000/authorize', {\n        method: 'POST',\n        credentials: \"same-origin\",\n        // mode: 'no-cors',\n        // cors: 'no-cors',\n        headers: {\n          // 'Cookie': 'aabbcc',\n          'Content-Type': 'application/json;charset=utf-8',\n          'Access-Control-Allow-Origin': 'http://192.168.169.32:5000',\n          'Access-Control-Allow-Credentials': 'true'\n          // 'Access-Control-Allow-Method': 'GET, POST, OPTIONS'\n        },\n\n        body: JSON.stringify({\n          'login': this.user.login,\n          \"password\": this.user.password\n        })\n      })\n      // .then(response => response.json())\n      .then(response => {\n        console.log(response.headers);\n        // if (response.login === true){\n        //   this.accessLogin = true\n        //   this.checkForm()\n        // }\n      });\n      // console.log(this.accessToken)\n    },\n\n    request() {\n      fetch('http://192.168.43.243:5000/getTestData', {\n        method: 'POST',\n        credentials: \"include\",\n        headers: {\n          // 'Authentication': 'Bearer {' + this.accessToken +'}',\n          'Content-Type': 'application/json;charset=utf-8'\n        }\n      }).then(response => response.text()).then(response => {\n        console.log(response);\n      });\n    }\n  }\n};","map":{"version":3,"names":["useVuelidate","required","minLength","props","name","setup","v$","data","user","login","password","accessToken","autorized","accessLogin","validations","methods","checkForm","$touch","$error","console","log","$emit","created","fetch","method","credentials","headers","body","JSON","stringify","then","response","request","text"],"sources":["D:\\GitHub\\SportSpot\\UserFrontend\\sport-spot-project\\src\\components\\NewRegistation.vue"],"sourcesContent":["<template>\r\n<div class=\"container login\">\r\n<!--    <form>-->\r\n      <form @submit.prevent=\"created\">\r\n        <div class=\"form-group\">\r\n            <label>Login: </label>\r\n            <input type=\"text\" v-model.trim=\"user.login\" class=\"form-control\"\r\n             :class=\"v$.user.login.$error ? 'is-invalid' : ''\">\r\n             <p v-if=\"v$.user.login.$dirty && v$.user.login.required.$invalid\" class=\"invalid-feedback\">\r\n                Обязательное поле\r\n            </p>\r\n             <p v-if=\"v$.user.login.$dirty && v$.user.login.minLength.$invalid\" class=\"invalid-feedback\">\r\n                Поле должно содержать минимум 3 символа\r\n            </p>\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label >Password: </label>\r\n            <input type=\"password\" v-model.trim=\"user.password\" class=\"form-control\"\r\n            :class=\"v$.user.password.$error ? 'is-invalid' : ''\">\r\n            <p v-if=\"v$.user.password.$dirty && v$.user.password.required.$invalid\" class=\"invalid-feedback\">\r\n                Обязательное поле\r\n            </p>\r\n             <p v-if=\"v$.user.password.$dirty && v$.user.password.minLength.$invalid\" class=\"invalid-feedback\">\r\n                Поле должно содержать минимум 3 символа\r\n            </p>\r\n        </div >\r\n        <div class=\"row justify-content-around form-group\">\r\n            <button type=\"submit\" class=\"btn btn-primary col-auto\">Войти</button>\r\n<!--            <button class=\"btn btn-success col-auto\" @click=\"request\">Отправить запрос</button>-->\r\n        </div>\r\n        \r\n    </form>\r\n</div>\r\n    \r\n</template>\r\n\r\n<script>\r\nimport { useVuelidate } from '@vuelidate/core'\r\nimport { required, minLength } from '@vuelidate/validators'\r\n\r\n    export default{\r\n        props: ['onLogin'],\r\n        name: \"NewRegistration\",\r\n        setup () {\r\n            return {\r\n                v$: useVuelidate()\r\n            }\r\n        },\r\n        data(){\r\n            return {\r\n                user: {\r\n                    login: '',\r\n                    password: '',\r\n                },\r\n                accessToken: '',\r\n                autorized: false,\r\n                accessLogin: false,\r\n\r\n            }\r\n        },\r\n        validations: {\r\n            user: {\r\n                login: { required, minLength: minLength(3) },\r\n                password: {required, minLength: minLength(3)},\r\n            }\r\n        },\r\n        methods: {\r\n            checkForm() {\r\n              // console.log('check')\r\n               this.v$.user.$touch()\r\n                if (!this.v$.user.$error) {\r\n                    console.log('Валидация прошла успешно')\r\n                  if (this.accessLogin === true){\r\n                    console.log('check')\r\n                    this.autorized = true\r\n                    this.$emit('sendLogin', this.autorized)\r\n                  }\r\n                    //\r\n                }\r\n                else console.log('Валидация не прошла')\r\n            },\r\n            created() {\r\n                console.log('post request')\r\n                    fetch('http://192.168.169.32:5000/authorize', {\r\n                          method: 'POST',\r\n\r\n                          credentials: \"same-origin\",\r\n                          // mode: 'no-cors',\r\n                      // cors: 'no-cors',\r\n                          headers: {\r\n                            // 'Cookie': 'aabbcc',\r\n                            'Content-Type': 'application/json;charset=utf-8',\r\n                            'Access-Control-Allow-Origin': 'http://192.168.169.32:5000',\r\n                            'Access-Control-Allow-Credentials': 'true',\r\n                            // 'Access-Control-Allow-Method': 'GET, POST, OPTIONS'\r\n                          },\r\n                          body: JSON.stringify({'login': this.user.login, \"password\": this.user.password})\r\n                        })\r\n                        // .then(response => response.json())\r\n                        .then((response) => {\r\n                            console.log(response.headers)\r\n                          // if (response.login === true){\r\n                          //   this.accessLogin = true\r\n                          //   this.checkForm()\r\n                          // }\r\n                        });\r\n                        // console.log(this.accessToken)\r\n            },\r\n            request() {\r\n                fetch('http://192.168.43.243:5000/getTestData', {\r\n                          method: 'POST',\r\n                          credentials: \"include\",\r\n                          headers: {\r\n                            // 'Authentication': 'Bearer {' + this.accessToken +'}',\r\n                            'Content-Type': 'application/json;charset=utf-8'\r\n                          }\r\n                        })\r\n                        .then(response => response.text())\r\n                        .then((response) => {\r\n                            console.log(response)\r\n                        });\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n.login {\r\n  max-width: 400px;\r\n  margin: 0 auto;\r\n  padding: 0 20px;\r\n  margin-top: 40px;\r\n}\r\n.form-control {\r\n  width: 400px;\r\n}\r\n.form-group {\r\n    width: 400px;\r\n}\r\n.btn-login {\r\n    width: 200px;\r\n    align-content: center;\r\n}\r\n\r\n</style>"],"mappings":"AAqCA,SAASA,YAAW,QAAS,iBAAgB;AAC7C,SAASC,QAAQ,EAAEC,SAAQ,QAAS,uBAAsB;AAEtD,eAAc;EACVC,KAAK,EAAE,CAAC,SAAS,CAAC;EAClBC,IAAI,EAAE,iBAAiB;EACvBC,KAAIA,CAAA,EAAK;IACL,OAAO;MACHC,EAAE,EAAEN,YAAY,CAAC;IACrB;EACJ,CAAC;EACDO,IAAIA,CAAA,EAAE;IACF,OAAO;MACHC,IAAI,EAAE;QACFC,KAAK,EAAE,EAAE;QACTC,QAAQ,EAAE;MACd,CAAC;MACDC,WAAW,EAAE,EAAE;MACfC,SAAS,EAAE,KAAK;MAChBC,WAAW,EAAE;IAEjB;EACJ,CAAC;EACDC,WAAW,EAAE;IACTN,IAAI,EAAE;MACFC,KAAK,EAAE;QAAER,QAAQ;QAAEC,SAAS,EAAEA,SAAS,CAAC,CAAC;MAAE,CAAC;MAC5CQ,QAAQ,EAAE;QAACT,QAAQ;QAAEC,SAAS,EAAEA,SAAS,CAAC,CAAC;MAAC;IAChD;EACJ,CAAC;EACDa,OAAO,EAAE;IACLC,SAASA,CAAA,EAAG;MACV;MACC,IAAI,CAACV,EAAE,CAACE,IAAI,CAACS,MAAM,CAAC;MACnB,IAAI,CAAC,IAAI,CAACX,EAAE,CAACE,IAAI,CAACU,MAAM,EAAE;QACtBC,OAAO,CAACC,GAAG,CAAC,0BAA0B;QACxC,IAAI,IAAI,CAACP,WAAU,KAAM,IAAI,EAAC;UAC5BM,OAAO,CAACC,GAAG,CAAC,OAAO;UACnB,IAAI,CAACR,SAAQ,GAAI,IAAG;UACpB,IAAI,CAACS,KAAK,CAAC,WAAW,EAAE,IAAI,CAACT,SAAS;QACxC;QACE;MACJ,OACKO,OAAO,CAACC,GAAG,CAAC,qBAAqB;IAC1C,CAAC;IACDE,OAAOA,CAAA,EAAG;MACNH,OAAO,CAACC,GAAG,CAAC,cAAc;MACtBG,KAAK,CAAC,sCAAsC,EAAE;QACxCC,MAAM,EAAE,MAAM;QAEdC,WAAW,EAAE,aAAa;QAC1B;QACJ;QACIC,OAAO,EAAE;UACP;UACA,cAAc,EAAE,gCAAgC;UAChD,6BAA6B,EAAE,4BAA4B;UAC3D,kCAAkC,EAAE;UACpC;QACF,CAAC;;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAC,OAAO,EAAE,IAAI,CAACrB,IAAI,CAACC,KAAK;UAAE,UAAU,EAAE,IAAI,CAACD,IAAI,CAACE;QAAQ,CAAC;MACjF,CAAC;MACD;MAAA,CACCoB,IAAI,CAAEC,QAAQ,IAAK;QAChBZ,OAAO,CAACC,GAAG,CAACW,QAAQ,CAACL,OAAO;QAC9B;QACA;QACA;QACA;MACF,CAAC,CAAC;MACF;IACZ,CAAC;;IACDM,OAAOA,CAAA,EAAG;MACNT,KAAK,CAAC,wCAAwC,EAAE;QACtCC,MAAM,EAAE,MAAM;QACdC,WAAW,EAAE,SAAS;QACtBC,OAAO,EAAE;UACP;UACA,cAAc,EAAE;QAClB;MACF,CAAC,EACAI,IAAI,CAACC,QAAO,IAAKA,QAAQ,CAACE,IAAI,CAAC,CAAC,EAChCH,IAAI,CAAEC,QAAQ,IAAK;QAChBZ,OAAO,CAACC,GAAG,CAACW,QAAQ;MACxB,CAAC,CAAC;IACd;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}